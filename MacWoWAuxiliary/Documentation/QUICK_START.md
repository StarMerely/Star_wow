# OCR 功能快速开始指南

## 🚀 5 分钟快速上手

### 第一步: 授予权限

1. **运行应用**
2. **授予屏幕录制权限**:
   - 系统设置 → 隐私与安全性 → 屏幕录制
   - 勾选 `MacWoWAuxiliary`
   
3. **授予辅助功能权限**:
   - 系统设置 → 隐私与安全性 → 辅助功能
   - 勾选 `MacWoWAuxiliary`

4. **重启应用**

### 第二步: 使用 OCR 功能

#### 单个文字点击
1. 打开应用，切换到 **"OCR识别"** 标签页
2. 设置扫描间隔为 `1` 秒
3. 点击 **"开始扫描"**
4. 在 "查找文字" 输入框输入要查找的文字（如 "确定"）
5. 点击 **"查找并点击"**

#### 🆕 多个文字依次点击
1. 在 "查找文字" 输入框输入多个文字，用分号分隔（如 "确定;开始;继续"）
2. 设置点击延迟（如 `0.5` 秒）
3. 点击 **"查找并点击"**
4. 应用会自动依次查找并点击每个文字

✅ 完成！应用会自动找到屏幕上的文字并点击它。

---

## 📋 功能说明

### 核心功能

| 功能 | 说明 |
|------|------|
| **自动截屏** | 每隔指定时间自动抓取屏幕 |
| **文字识别** | 使用 AI 识别屏幕上的所有文字 |
| **智能定位** | 找到指定文字的精确坐标 |
| **模拟点击** | 在文字位置自动点击 |

### 支持的语言

- ✅ 简体中文
- ✅ 英文
- ✅ 数字

---

## 💡 使用场景

### 场景 1: 游戏自动化

```
目标: 自动点击游戏中的"领取奖励"按钮

步骤:
1. 开始扫描
2. 输入 "领取奖励"
3. 点击 "查找并点击"
```

### 🆕 场景 1b: 依次点击多个按钮

```
目标: 依次点击"打开背包;查看物品;领取奖励;关闭"

步骤:
1. 开始扫描
2. 输入 "打开背包;查看物品;领取奖励;关闭"
3. 设置点击延迟为 1 秒
4. 点击 "查找并点击"
```

### 场景 2: 重复性操作

```
目标: 每隔 5 秒点击一次"刷新"按钮

步骤:
1. 设置扫描间隔为 5 秒
2. 开始扫描
3. 输入 "刷新"
4. 设置定时器自动点击
```

### 场景 3: 监控屏幕变化

```
目标: 当屏幕出现"任务完成"时自动点击

步骤:
1. 开始扫描
2. 监控识别结果
3. 检测到目标文字时执行操作
```

---

## ⚙️ 高级设置

### 调整扫描间隔

- **推荐值**: 1-2 秒
- **最小值**: 0.5 秒（性能消耗大）
- **最大值**: 无限制

### 提高识别准确度

1. **确保文字清晰**: 放大屏幕文字
2. **避免遮挡**: 确保目标文字完全可见
3. **等待加载**: 给页面足够的加载时间

### 优化性能

1. **合理设置间隔**: 不要设置过短的扫描间隔
2. **及时停止扫描**: 不使用时停止扫描
3. **关闭其他应用**: 减少系统负担

---

## 🔧 常见问题

### Q: 为什么无法截屏？
**A**: 检查是否授予了屏幕录制权限，并重启应用。

### Q: 为什么无法点击？
**A**: 检查是否授予了辅助功能权限。

### Q: 识别不准确怎么办？
**A**: 
- 增加扫描间隔
- 确保文字清晰可见
- 尝试输入更完整的文字

### Q: 如何停止扫描？
**A**: 点击 "停止扫描" 按钮即可。

### Q: 支持哪些文字？
**A**: 支持中文、英文、数字，不支持特殊符号。

---

## 📝 代码示例

### 基本使用

```swift
let ocrManager = OCRManager()

// 开始扫描
ocrManager.startScanning(interval: 1.0)

// 单个文字点击
ocrManager.findAndClick("确定")

// 🆕 多个文字依次点击（用分号分隔）
ocrManager.findAndClickMultiple("确定;开始;继续", delayBetweenClicks: 0.5)

// 停止扫描
ocrManager.stopScanning()
```

### 获取所有文字

```swift
// 获取识别到的所有文字
for location in ocrManager.foundTextLocations {
    print("文字: \(location.text)")
    print("位置: \(location.bounds)")
}
```

### 条件点击

```swift
// 只点击置信度高的结果
let matches = ocrManager.findText("开始")
if let bestMatch = matches.first(where: { $0.confidence > 0.8 }) {
    let point = CGPoint(x: bestMatch.bounds.midX, y: bestMatch.bounds.midY)
    ocrManager.clickAt(point: point)
}
```

---

## 🎯 最佳实践

### ✅ 推荐做法

1. **先测试再自动化**: 先手动测试功能是否正常
2. **合理设置间隔**: 根据实际需求设置扫描间隔
3. **添加错误处理**: 处理找不到文字的情况
4. **及时停止**: 不使用时停止扫描

### ❌ 避免做法

1. **不要设置过短间隔**: 会消耗大量系统资源
2. **不要在后台运行**: 确保目标应用在前台
3. **不要依赖模糊匹配**: 尽量输入完整的文字
4. **不要忽略权限**: 必须授予所需权限

---

## 📞 技术支持

如有问题，请查看:
- `OCR_README.md` - 详细功能说明
- `OCRUsageExample.swift` - 代码示例
- `PrivacyInfo.md` - 权限配置说明

---

## 🔒 隐私说明

- ✅ 所有数据仅在本地处理
- ✅ 不会上传任何内容到服务器
- ✅ 符合 Apple 隐私政策
- ✅ 开源透明，可审查代码

---

**祝使用愉快！** 🎉
